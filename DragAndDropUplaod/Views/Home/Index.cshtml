@{
    ViewData["Title"] = "Home Page";
}

@*<script src="~/Scripts/dropzone/dropzone.min.js"></script>
    <script src="~/Scripts/bootstrap.min.js"></script>
    <link href="~/Scripts/dropzone/dropzone.min.css" rel="stylesheet" />*@
<script src="https://unpkg.com/dropzone@5/dist/min/dropzone.min.js"></script>
<link rel="stylesheet" href="https://unpkg.com/dropzone@5/dist/min/dropzone.min.css" type="text/css" />
<div class="jumbotron">
    @*@using (Html.BeginForm("Upload", "Home", FormMethod.Post, new { enctype = "multipart/form-data" }))
    {

        <input type="file" name="files" multiple="true" />
        <button id="submit-all" type="submit" value="submit">  Submit   </button>
    }*@


    <form action="~/Home/Upload" method="post" class="dropzone" id="mydropzone1" style="background-color:#00a17a">
        <input type="file" id="files" name="files" multiple="true" hidden="true" />    
    </form>
    <button id="submit-all" type="submit" >  Submit   </button>
    <a href="~/Home/Calender">Calender</a>
</div>

<script type="text/javascript">
    //Dropzone.options.mydropzone1 =
    //{
    //    init: function () {
    //        this.on("complete", function (data) {
    //            //var res = eval('(' + data.xhr.responseText + ')');
    //            var res = JSON.parse(data.xhr.responseText);
    //        });
    //    }
    //};
    const dataTransfer = new DataTransfer();
    Dropzone.options.mydropzone1 =
    {
        autoProcessQueue: false,
        maxFilesize: 5000,
        acceptedFiles: ".pdf,.jpeg,.jpg,.png",
        init: function () {                 
            this.on("addedfile", function (file) {                
                var removeButton = Dropzone.createElement("<button class='btn btn-danger' style='margin-bottom:-15%;margin-left:70%;border-radius:20px;font-weight:bold;'>X</button>");
                var _this = this;                
                removeButton.addEventListener("click", function (e) {
                    e.preventDefault();
                    e.stopPropagation();
                    _this.removeFile(file);                    
                });                
                file.previewElement.appendChild(removeButton);
            });
            this.element.querySelector("button[type=submit]").addEventListener("click", function (e) {
                debugger;
                e.preventDefault();
                e.stopPropagation();
                mydropzone1.processQueue();
            });
        }        
    };
    


    
</script>
<div class="text-center">

</div>
